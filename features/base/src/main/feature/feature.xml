<?xml version="1.0" encoding="UTF-8"?>
<features name="${project.artifactId}-${project.version}" xmlns="http://karaf.apache.org/xmlns/features/v1.3.0">

  <!-- <feature name="${project.artifactId}" description="${project.name}" version="${project.version}"> -->

  <feature name="shk-runtime" description="${project.name}" version="${project.version}">
    <details>${project.description}</details>

    <!-- As long as the Equinox framework is used, we could use this one. -->
    <feature>kat-kce</feature>

    <feature>esh-base</feature>
    <feature>esh-io-console-karaf</feature>
    <feature>esh-io-rest-sitemap</feature>
    <feature>esh-model-item-runtime</feature>
    <feature>esh-model-persistence-runtime</feature>
    <feature>esh-model-rule-runtime</feature>
    <feature>esh-model-script-runtime</feature>
    <feature>esh-model-sitemap-runtime</feature>
    <feature>esh-model-thing-runtime</feature>
    <feature>esh-storage-mapdb</feature>
    <feature>esh-ui-iconset-classic</feature>
    <feature>war</feature>
  </feature>

  <feature name="shk-jax-rs-min" version="5.3">
    <feature dependency="true">http</feature>
    <bundle dependency="true">mvn:com.eclipsesource.jaxrs/jersey-min/2.22.1</bundle>
    <bundle>mvn:com.eclipsesource.jaxrs/publisher/5.3</bundle>
  </feature>

  <feature name="shk-jax-rs-provider-gson" version="2.3">
    <feature dependency="true" version="[5.3,5.4)">shk-jax-rs-min</feature>
    <bundle dependency="true">mvn:com.google.code.gson/gson/2.3.1</bundle>
    <bundle>mvn:com.eclipsesource.jaxrs/provider-gson/2.3</bundle>
  </feature>

  <feature name="shk-jax-rs-provider-swagger" version="1.0.sp1">
    <feature dependency="true" version="[5.3,5.4)">shk-jax-rs-min</feature>
    <bundle>mvn:de.maggu2810.thirdparty.modified.com.eclipsesource.jaxrs/swagger-all/1.5.5.sp1</bundle>
    <bundle>mvn:com.eclipsesource.jaxrs/provider-swagger/1.1</bundle>
  </feature>

  <feature name="shk-jmdns" version="${dep.jmdns.version}">
    <bundle>mvn:org.openhab.jmdns/jmdns/${dep.jmdns.version}</bundle>
    <capability>esh.tp;feature=jmdns</capability>
  </feature>

  <feature name="shk-jupnp" version="${dep.jupnp.version}">
    <feature dependency="true">http</feature>
    <feature>kat-apache-httpcomponents-httpclient</feature>
    <bundle>mvn:org.jupnp/org.jupnp/${dep.jupnp.version}</bundle>
    <capability>esh.tp;feature=jupnp</capability>
  </feature>

  <feature name="shk-paho" version="${dep.paho.version}">
    <bundle>mvn:org.eclipse.paho/org.eclipse.paho.client.mqttv3/${dep.paho.version}</bundle>
    <capability>esh.tp;feature=paho</capability>
  </feature>

  <!-- All remaining (TODO: sort) Eclipse SmartHome bundles, create features for them -->
  <!--<bundle>mvn:org.eclipse.smarthome.automation/org.eclipse.smarthome.automation.sample-handler/${esh.version}</bundle>-->
  <!--<bundle dependency="true">mvn:org.eclipse.smarthome.core/org.eclipse.smarthome.core.extension.sample/${esh.version}</bundle>-->
  <!--<bundle dependency="true">mvn:org.eclipse.smarthome.io/org.eclipse.smarthome.io.console.eclipse/${esh.version}</bundle>-->
  <!--<bundle dependency="true">mvn:org.eclipse.smarthome.io/org.eclipse.smarthome.io.console.rfc147/${esh.version}</bundle>-->

  <!-- ESH target platform stuff (product specific) -->

  <feature name="esh-tp-base" description="TargetPlatform Base" version="${project.version}">
    <feature>eventadmin</feature>
    <feature>scr</feature>
    <feature>shk-jax-rs-min</feature>
    <feature>shk-jax-rs-provider-gson</feature>
    <feature>shk-jax-rs-provider-swagger</feature>
    <bundle>mvn:io.swagger/swagger-annotations/1.5.5</bundle>
  </feature>

  <feature name="esh-tp-commons" version="${project.version}">
    <feature dependency="true">kat-apache-commons-codec</feature>
    <feature dependency="true">kat-apache-commons-collections</feature>
    <feature dependency="true">kat-apache-commons-exec</feature>
    <feature dependency="true">kat-apache-commons-httpclient</feature>
    <feature dependency="true">kat-apache-commons-io</feature>
    <feature dependency="true">kat-apache-commons-lang</feature>
    <feature dependency="true">kat-apache-commons-net</feature>
  </feature>

  <feature name="esh-tp-jupnp" version="${project.version}">
    <feature>shk-jupnp</feature>
  </feature>

  <feature name="esh-tp-jmdns" version="${project.version}">
    <feature>shk-jmdns</feature>
  </feature>

  <feature name="esh-tp-paho" version="${project.version}">
    <feature>shk-paho</feature>
  </feature>

  <feature name="esh-tp-xtext" version="${project.version}">
    <feature version="[2.6.2,2.6.3)">kat-xtext</feature>
    <capability>esh.tp;feature=xtext;version=2.6.2</capability>
  </feature>

</features>
